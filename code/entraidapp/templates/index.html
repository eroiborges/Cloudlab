{% extends "base.html" %}

{% block content %}
<div style="text-align: center;">
    {% if user %}
        <div class="success">
            <h3>‚úì Authentication Successful!</h3>
            <p>Welcome back, <strong>{{ user.displayName or user.userPrincipalName }}</strong>!</p>
        </div>
        
        <div class="user-info">
            <h4>User Information:</h4>
            <p><strong>Display Name:</strong> {{ user.displayName or 'Not available' }}</p>
            <p><strong>User Principal Name:</strong> {{ user.userPrincipalName or 'Not available' }}</p>
            <p><strong>Email:</strong> {{ user.mail or 'Not available' }}</p>
        </div>
        
        <a href="{{ url_for('profile') }}" class="button">View Profile</a>
        <a href="{{ url_for('tokens') }}" class="button">View Tokens</a>
        <a href="{{ url_for('logout') }}" class="button secondary">Logout</a>
    {% else %}
        <div style="margin-bottom: 30px;">
            <h3>Microsoft Entra ID OAuth2.0 Authentication Demo</h3>
            <p>This demo showcases OAuth2.0 Authorization Code flow integration with Microsoft Entra ID.</p>
            <p>Click the button below to start the authentication process.</p>
        </div>
        
        <a href="{{ url_for('login') }}" class="button">üîê Login with Microsoft</a>
        
        <div style="margin-top: 30px; font-size: 14px; color: #666;">
            <p><strong>Features demonstrated:</strong></p>
            <ul style="text-align: left; display: inline-block;">
                <li>OAuth2.0 Authorization Code Flow</li>
                <li>JWT Token Validation</li>
                <li>Microsoft Graph API Integration</li>
                <li>Session Management</li>
                <li>Dynamic Redirect URI Configuration</li>
            </ul>
        </div>
    {% endif %}
</div>
{% endblock %}